{% extends 'admin/adminBase.html.twig' %}

{% block title %}
    Ajout d'une analyse en cours de retrait
{% endblock %}

{% block right %}
    <div class="container-fluid">
        <div class="row m-3" style="height: 10vh">
            <div class="col-12 text-center">
                <h1>Nouvelle analyse</h1>
            </div>
        </div>
    </div>
    <hr>
    <div class="container">
        <div class="row">
            <div class="col-12">
                {{ form_start(formRemoval) }}
                {{ form_widget(formRemoval.location) }}
                <br>
                {{ form_widget(formRemoval.zone) }}
                <br>
                Zone à associer à l'analyse:
                <div id="select_zone">
                    <select class="form-control" name="phase-select" id="phase-select" disabled>
                        <option value="">Choisir la zone ci-dessus</option>
                    </select>
                </div>
                <br>
                {{ form_end(formRemoval) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script type="text/javascript">
        $("#removal_zone").change(function () {
            var zone = $(this);

            console.log($("#removal_zone").val(), zone.val());
            $.ajax({
                url: '/initial/zonebysiteid/' + zone.val(),
                dataType: 'html',
                success: function (html) {
                    console.log(html)
                    $('#select_zone').html(html);
                }
            })
        })
    </script>
{% endblock %}