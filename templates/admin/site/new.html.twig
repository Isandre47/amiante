{% extends 'admin/adminBase.html.twig' %}

{% block title %}
    Ajout d'un chantier
{% endblock %}

{% block right %}
    <div class="container-fluid">
        <div class="row m-3" style="height: 10vh">
            <div class="col-12 text-center">
                <h1>Ajouter un chantier</h1>
            </div>
        </div>
    </div>
    <hr>
    <div class="container">
        <div class="row">
            <div class="col-12">
                {{ form_start(formSite) }}
                {{ form_row(formSite.name) }}
                {{ form_row(formSite.zones) }}
                {{ form_row(formSite.process) }}
                {{ form_row(formSite.fibreType) }}
                <br>
                <button class="btn btn-primary">{{ button_label|default('Enregistrer') }}</button>
                <br>
                {{ form_end(formSite) }}
                <hr>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-12">
                Votre zone n'est pas présente ?
                Ajoutez ci-dessous la vôtre: <br>
                {{ form_start(formCategory) }}
                {{ form_row(formCategory.name) }}
                <br>
                <button class="btn btn-primary">{{ button_label|default('Enregistrer') }}</button>
                <br>
                {{ form_end(formCategory) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script>
        $( function () {
            $('form[name="category"]').submit(function (event) {
                var category = $('#category_name').val();
                console.log(category);
                $.ajax( {
                    type: 'POST',
                    url: '{{ path('category_new') }}',
                    data: {
                        name: category,
                        type: 'Phase Chantier'
                    },
                    success: function(data) {
                        console.log('success');
                        console.log(data);
                        // $('#info').html(html);
                    },
                    error: function (data) {
                        console.log('error');

                    }
                } );
            })
        })
    </script>
{% endblock %}